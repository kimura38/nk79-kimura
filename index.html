<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>リアルタイムグループチャット</title>

<!-- Firebase（HTML用） -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  margin: 0;
  background: #121212;
  color: white;
  font-family: sans-serif;
}
#messages {
  height: 80vh;
  overflow-y: auto;
  padding: 10px;
}
.msg {
  margin: 6px 0;
}
#input {
  display: flex;
}
input {
  flex: 1;
  font-size: 16px;
}
button {
  font-size: 16px;
}
</style>
</head>
<body>

<div id="messages"></div>

<div id="input">
  <input id="name" placeholder="名前">
  <input id="text" placeholder="メッセージ">
  <button onclick="send()">送信</button>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCQNNj6Ff39wECAI6i8n1f2NXstF2k7duo",
  authDomain: "chat-99077.firebaseapp.com",
  databaseURL: "https://chat-99077-default-rtdb.firebaseio.com",
  projectId: "chat-99077",
  storageBucket: "chat-99077.firebasestorage.app",
  messagingSenderId: "991554319310",
  appId: "1:991554319310:web:a662919d90bc014e06319f"
};

firebase.initializeApp(firebaseConfig);

const db = firebase.database();
const chatRef = db.ref("chat");

function send() {
  const name = document.getElementById("name").value || "名無し";
  const text = document.getElementById("text").value;
  if (!text) return;

  chatRef.push({ name, text });
  document.getElementById("text").value = "";
}

chatRef.on("child_added", snap => {
  const msg = snap.val();
  const div = document.createElement("div");
  div.className = "msg";
  div.textContent = `${msg.name}: ${msg.text}`;
  document.getElementById("messages").appendChild(div);
});
</script>

</body>
</html>
