<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>RPG</title>
<style>
  body { margin: 0; background: black; }
  canvas { display: block; margin: auto; background: #000; }
</style>
</head>
<body>

<canvas id="game" width="480" height="480"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const TILE = 48;

// マップ（0=道, 1=壁）
const map = [
  [1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,0,0,0,0,0,1],
  [1,0,1,1,0,1,1,1,0,1],
  [1,0,0,0,0,0,0,1,0,1],
  [1,1,1,0,1,1,0,1,0,1],
  [1,0,0,0,0,0,0,0,0,1],
  [1,0,1,1,1,1,1,1,0,1],
  [1,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,1,0,0,0,0,1],
  [1,1,1,1,1,1,1,1,1,1]
];

// プレイヤー
const player = {
  x: 1,
  y: 1,
  color: "cyan"
};

// タッチ操作
canvas.addEventListener("touchstart", e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.touches[0].clientX - rect.left;
  const y = e.touches[0].clientY - rect.top;

  if (x < canvas.width / 3) move(-1, 0);
  else if (x > canvas.width * 2 / 3) move(1, 0);
  else if (y < canvas.height / 3) move(0, -1);
  else if (y > canvas.height * 2 / 3) move(0, 1);
});

// 移動処理
function move(dx, dy) {
  const nx = player.x + dx;
  const ny = player.y + dy;
  if (map[ny][nx] === 0) {
    player.x = nx;
    player.y = ny;
  }
}

// 描画
function draw() {
  ctx.clearRect(0,0,480,480);

  for (let y=0;y<10;y++) {
    for (let x=0;x<10;x++) {
      ctx.fillStyle = map[y][x] === 1 ? "#444" : "#111";
      ctx.fillRect(x*TILE, y*TILE, TILE, TILE);
    }
  }

  // プレイヤー
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x*TILE+8, player.y*TILE+8, 32, 32);

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
